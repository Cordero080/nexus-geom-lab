/* HomeIndex.module.scss */
.portalContainer {
  /* Local scope ensures no external CSS bleeds in */
  all: initial;
  * {
    all: unset;
    box-sizing: border-box;
  }

  /* Establish new stacking context */
  isolation: isolate;
  position: relative;
  width: 100%;
  max-width: 100vw;
  overflow-x: hidden;
  overflow-y: hidden;
}

/* Base Dark Layer (z-index: -4) */
.baseDark {
  position: fixed;
  inset: 0;
  background: linear-gradient(
    180deg,
    rgba(0, 0, 0, 0.398) 0%,
    rgba(0, 0, 0, 0.254) 15%,
    rgba(0, 0, 0, 0.135) 30%,
    rgba(0, 0, 0, 0.106) 50%,
    rgba(0, 0, 0, 0.063) 70%,
    rgba(0, 0, 0, 0.025) 85%,
    rgba(0, 0, 0, 0) 100%
  );
  z-index: -4;
}

/* Quantum Portal Layer for color shifting */
.quantumPortalLayer {
  position: fixed;
  inset: 0;
  z-index: -5;
  opacity: 0.6;
  filter: brightness(1.2) saturate(1.5);
  mix-blend-mode: normal;
  transition: all 4.2s cubic-bezier(0.4, 0, 0.2, 1);

  /* Dynamic background gradients using CSS custom properties */
  background:
    radial-gradient(
      circle at 30% 120%,
      var(--portal-color-0) 0%,
      var(--portal-color-1) 30%,
      var(--portal-color-2) 60%,
      transparent 80%
    ),
    radial-gradient(
      circle at 70% 130%,
      var(--portal-color-1) 0%,
      var(--portal-color-2) 40%,
      var(--portal-color-0) 70%,
      transparent 90%
    );
}

/* Quantum Veil to reduce color strength at top */
.quantumVeil {
  position: fixed;
  inset: 0;
  z-index: -4;
  background: linear-gradient(
    180deg,
    rgba(0, 0, 0, 1) 0%,
    rgba(0, 0, 0, 0.573) 30%,
    rgba(0, 0, 0, 0.472) 50%,
    rgba(0, 0, 0, 0) 70%
  );
  pointer-events: none;
}

/* Scene Backgrounds (behind content) - CLEAN clip paths that scroll */
.sceneBackground {
  position: absolute;
  inset: 0;
  width: 100vw;
  height: 100vh;
  z-index: 0;
  background:
    linear-gradient(120deg, #0a0f1aed 60%, #1a2a3a 100%),
    repeating-linear-gradient(-30deg, #00f0ff22 0 2px, transparent 2px 40px);
  opacity: 1.5;
  pointer-events: none;
  will-change: transform;
  transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
  transform-origin: center;
  /* Fade mask at top to blend into quantum SVG gradients above */
  -webkit-mask-image: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 0) 0%,
    rgba(0, 0, 0, 0.3) 15%,
    rgba(0, 0, 0, 1) 35%
  );
  mask-image: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 0) 0%,
    rgba(0, 0, 0, 0.3) 5%,
    rgba(0, 0, 0, 1) 35%
  );
}

/* Scene-specific clip paths create "windows" to see portal colors */
.bgReality {
  @extend .sceneBackground;
  clip-path: polygon(0 0, 100% 0, 100% 80%, 60% 100%, 0 80%);
}

.bgProbability {
  @extend .sceneBackground;
  clip-path: polygon(0 10%, 100% 0, 100% 90%, 0 100%);
}

.bgEntanglement {
  @extend .sceneBackground;
  clip-path: polygon(0 0, 100% 10%, 100% 100%, 40% 90%, 0 100%);
}

.bgSuperposition {
  @extend .sceneBackground;
  clip-path: polygon(0 0, 100% 0, 100% 100%, 20% 90%, 0 100%);
}

/* Dark top veil - ensures dark atmosphere at top */
.darkTopVeil {
  position: fixed;
  inset: 0;
  z-index: -2; /* MOVED BACK BEHIND CONTENT */
  height: 100vh;
  background: linear-gradient(
    180deg,
    rgba(0, 0, 0, 1) 0%,
    rgba(0, 0, 0, 1) 40%,
    rgba(0, 0, 0, 0.98) 60%,
    rgba(0, 0, 0, 0.95) 80%,
    rgba(0, 0, 0, 0) 100%
  );
  pointer-events: none;
}

/* Page Top Section */
.pageTop {
  position: relative;
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  z-index: 1;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.85) 0%, rgba(0, 0, 0, 0.6) 100%);
    z-index: -1;
    pointer-events: none;
  }
}

/* Scene Content */
.sceneContent {
  position: relative;
  z-index: 10;
  padding: 150px 40px 80px;
  text-align: center;
  overflow: visible;
  pointer-events: none !important;

  /* Ensure title and content are super front */
  h1,
  h2,
  p,
  .terminal-header,
  .hero-stats,
  .quantum-title {
    position: relative;
    z-index: 10;
    pointer-events: auto;
  }

  /* Ensure all interactive elements work */
  button,
  a,
  input,
  [role='button'] {
    pointer-events: auto !important;
    cursor: pointer !important;
    position: relative;
    z-index: 100;
  }

  /* Allow pointer events on button containers */
  > div {
    pointer-events: auto !important;
  }
}

/* Terminal header spacing */
:global(.terminal-header) {
  margin-top: 0;
  margin-bottom: 20px;
}

/* Scene Titles */
.sceneTitle {
  font-size: 0.8em;
  font-family: 'Orbitron', 'JetBrains Mono', monospace;
  font-weight: 900;
  letter-spacing: 0.15em;
  color: #fbfafe9c;
  margin: 40px 0 20px 0;
}

/* Scene Descriptions */
.sceneDescription {
  font-size: 0.85em;
  font-family: 'Orbitron', 'JetBrains Mono', monospace;
  font-weight: 500;
  letter-spacing: 0.08em;
  color: #f4f6f871;
  text-shadow:
    0 0 1px #00b7ff66,
    0 0 2px #07021f6a;
  margin-bottom: 30px;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
  line-height: 1.6;
}

/* Holographic parallax effect */
.parallaxHolo {
  will-change: transform, opacity, filter;
  perspective: 800px;
  transition: none;
  display: inline-block;
  font-size: 2.2em;
  font-family: 'Orbitron', 'JetBrains Mono', monospace;
  font-weight: 900;
  letter-spacing: 0.04em;
  color: #00fff7;
  text-shadow:
    0 0 24px #00fff7cc,
    0 0 60px #00fff744,
    0 0 2px #fff;
  filter: blur(0.5px) brightness(1.1) saturate(1.2);
  opacity: 0.7;
  transform: translateZ(0px) scale(1);
  transition:
    transform 1.2s cubic-bezier(0.4, 0, 0.2, 1),
    opacity 1.2s,
    filter 1.2s;

  &.animate {
    opacity: 0;
    filter: blur(8px) brightness(2.2) saturate(2.5);
    transform: translateZ(180px) scale(2.2) skewY(-6deg) rotateX(18deg);
    pointer-events: none;
  }
}

/* Enhanced N3XUS Title */
.quantumTitle {
  position: relative !important;
  z-index: 9999 !important;
  isolation: isolate;
  pointer-events: auto !important;

  /* Create new stacking context */
  transform-style: preserve-3d;
  transform: translateZ(0);
}

.n3xusTitle,
.scrambleTitle {
  will-change: transform, text-shadow;
  perspective: 1000px;
  transform-style: preserve-3d;
  position: relative !important;
  z-index: 9999 !important;
  transition:
    transform 0.1s ease-out,
    text-shadow 0.3s ease;

  &::after {
    content: attr(data-text);
    position: absolute;
    top: 100%;
    left: 0;
    transform: scaleY(-1) rotateX(180deg);
    background: linear-gradient(to bottom, rgba(0, 255, 247, 0.3), transparent);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    opacity: 0.4;
    filter: blur(1px);
    pointer-events: none;
  }
}

/* Quantum Scene */
.quantumScene {
  opacity: 1;
  pointer-events: none !important;
  transition: opacity 1.1s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  width: 100vw;
  min-height: 100vh;
  z-index: 1;
  perspective: 2000px;
  transform-style: preserve-3d;

  &:not(.active) {
    opacity: 0;
    pointer-events: none !important;
    z-index: 1;
  }

  &.active {
    opacity: 1;
    pointer-events: none !important;
    position: relative;
    z-index: 2;
  }
}

/* Parallax Layers */
.parallaxBgLayer,
.parallaxFgLayer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 40vh;
  pointer-events: none;
  will-change: transform;
  transform-style: preserve-3d;

  svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 40vh;
    pointer-events: none;
  }
}

.parallaxBgLayer {
  z-index: -1;

  svg {
    opacity: 0.05;
  }
}

.parallaxFgLayer {
  z-index: -2;
  mix-blend-mode: screen;
  opacity: 0.5;

  svg {
    opacity: 0.02;
  }
}

/* Parallax Container */
.parallaxContainer {
  position: relative;
  min-height: 400vh;
  perspective: 1500px;
  transform-style: preserve-3d;
  pointer-events: none !important;
  z-index: 1;
}

/* Floating Code */
.floatingCode {
  position: relative;
  z-index: 100;
  transform-style: preserve-3d;
  will-change: text-shadow, opacity;

  &.quoteHighlight {
    line-height: 2.1;
    margin: 120px 0 32px 0;
    padding: 24px 32px;
    border: none;
    border-radius: 18px;
    font-size: 1.1em;
    font-style: italic;
    font-family: 'Orbitron', 'JetBrains Mono', monospace;
    font-weight: 800;
    background: linear-gradient(135deg, #00ffff72, #ff00668d, #ffff0094, #00ff33, #cc00ff, #ff3300);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    color: #ffffff;
    text-shadow: 0 0 20px rgba(45, 86, 86, 0.4);
    animation:
      logoGlitch 6s ease-in-out infinite,
      gradientShift 4s ease-in-out infinite;
    letter-spacing: 0.01em;
    z-index: -1;
    opacity: 0.7;
  }
}

/* Quantum Console */
.quantumConsole {
  margin-top: 60px;
  font-size: 1.2em;
  font-family: 'Orbitron', monospace;
  text-align: center;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  padding: 20px;
  transform: translateX(0) !important;
  position: relative;
  left: 0;
  right: 0;
}

.consoleLine {
  font-size: 1.3em;
  color: #00ff33;
  text-shadow:
    0 0 8px #00ff3366,
    0 0 16px #00ff3322;
  margin: 12px 0;
  letter-spacing: 0.05em;
}

/* Enter Geom Lab button */
.homeEnterGeomLabBtn {
  font-size: 24px !important;
  padding: 24px 180px !important;
  letter-spacing: 0.05em !important;
}

/* HomePage Title Entrance Animations */
@keyframes particleArrivalTopLeft {
  0% {
    opacity: 0;
    transform: translate3d(-800px, -600px, -2000px) scale(0.2) rotate(-15deg);
    filter: blur(25px);
  }
  60% {
    opacity: 0.8;
    filter: blur(4px);
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1) rotate(0deg);
    filter: blur(0);
  }
}

@keyframes particleArrivalRight {
  0% {
    opacity: 0;
    transform: translate3d(1000px, 0px, -2500px) scale(0.15) rotate(70deg);
    filter: blur(2px);
  }
  60% {
    opacity: 0.8;
    filter: blur(1px);
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1) rotate(0deg);
    filter: blur(0);
  }
}

@keyframes particleArrivalBottomLeft {
  0% {
    opacity: 0;
    transform: translate3d(-800px, 600px, -9000px) scale(0.25) rotate(313deg);
    filter: blur(11px);
  }
  60% {
    opacity: 0.7;
    filter: blur(0px);
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1) rotate(0deg);
    filter: blur(0);
  }
}

@keyframes titleFloatLayer1 {
  0%,
  100% {
    transform: translateY(0px) translateX(0px);
  }
  33% {
    transform: translateY(-5px) translateX(1px);
  }
  66% {
    transform: translateY(-3px) translateX(-1px);
  }
}

@keyframes titleFloatLayer2 {
  0%,
  100% {
    transform: translateY(0px) translateX(0px);
  }
  40% {
    transform: translateY(-7px) translateX(-1.5px);
  }
  70% {
    transform: translateY(-4px) translateX(1px);
  }
}

@keyframes titleFloatLayer3 {
  0%,
  100% {
    transform: translateY(0px) translateX(0px);
  }
  35% {
    transform: translateY(-6px) translateX(1px);
  }
  65% {
    transform: translateY(-3px) translateX(-1.5px);
  }
}

/* HomePage-specific title word animations */
:global {
  .title-word[data-word='N3XUS'] {
    animation:
      pageTitleShimmer 5s ease-in-out infinite,
      particleArrivalTopLeft 1.8s cubic-bezier(0.22, 1, 0.36, 1) forwards,
      titleFloatLayer1 7s ease-in-out infinite;
    animation-delay: 0s, 0s, 1.8s;
  }

  .title-word[data-word='GE0M'] {
    animation:
      pageTitleShimmer 5s ease-in-out infinite,
      particleArrivalRight 1.8s cubic-bezier(0.22, 1, 0.36, 1) forwards,
      titleFloatLayer2 5.5s ease-in-out infinite;
    animation-delay: 0s, 0.3s, 2.1s;
  }

  .title-word[data-word='LVB'] {
    animation:
      pageTitleShimmer 5s ease-in-out infinite,
      particleArrivalBottomLeft 2s cubic-bezier(0.22, 1, 0.36, 1) forwards,
      titleFloatLayer3 6.5s ease-in-out infinite;
    animation-delay: 0s, 0.6s, 2.6s;
  }
}

/* Animations */
@keyframes logoGlitch {
  0%,
  100% {
    filter: none;
  }
  10% {
    filter: blur(1px) brightness(1.2);
  }
  20% {
    filter: blur(0.5px) brightness(0.8);
  }
  30% {
    filter: blur(2px) brightness(1.4);
  }
  40% {
    filter: blur(0.5px) brightness(1.1);
  }
  50% {
    filter: none;
  }
}

@keyframes gradientShift {
  0%,
  100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

/* Ensure interactive elements are properly layered */
.navLinks,
.navLink,
.terminalCursor,
.quantumTitle,
.sceneContent,
.beamScanButton,
button,
a,
input,
.scrambleButton {
  position: relative;
  z-index: 100 !important;
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Extra boost for quantum title */
.quantumTitle,
.quantum-title {
  position: relative;
  z-index: 2000 !important;
}

/* Make sure non-interactive elements don't block interactions */
.cursor,
.wormhole,
.gravityField,
.dimensionalRift {
  pointer-events: none !important;
  z-index: 99999;
}

/* ===== GLOBAL STYLES FROM Home.css AND home.css ===== */

:global {
  /* ScrambleOnHover span */
  .scramble-hover-span {
    cursor: none;
    font-family: 'Future Z', 'Orbitron', 'Rajdhani', sans-serif;
  }

  /* Nav bar with dynamic quantum colors */
  .quantum-nav {
    width: 100vw;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 40px;
    height: 110px;
    font-family: 'Orbitron', 'JetBrains Mono', monospace;
    transition: all 1.2s ease;
    /* Dynamic colors set via CSS variables */
    background: var(--nav-background);
    backdrop-filter: var(--nav-backdrop-filter);
    border-bottom: var(--nav-border-bottom);
    box-shadow: var(--nav-box-shadow);
  }

  /* Logo text with dynamic filter */
  .logo-text {
    position: relative;
    font-family: 'Orbitron', 'JetBrains Mono', monospace;
    font-size: 28px;
    font-weight: 800;
    color: #fff;
    background: linear-gradient(135deg, #00ffff72, #ff00668d, #ffff0094, #00ff33, #cc00ff, #ff3300);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 0 20px rgba(45, 86, 86, 0.4);
    animation:
      logoGlitch 6s ease-in-out infinite,
      gradientShift 4s ease-in-out infinite;
    transition: filter 1.2s;
    /* Dynamic filter set via CSS variable */
    filter: var(--logo-filter);

    &::before {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 2px;
      color: #ff00ff;
      animation: glitchShift1 3s ease-in-out infinite;
      z-index: -1;
      opacity: 0.7;
    }

    &::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: -2px;
      color: #00ffff;
      animation: glitchShift2 4s ease-in-out infinite;
      z-index: -2;
      opacity: 0.5;
    }
  }

  /* Quantum glyphs in navbar */
  .nav-quantum-glyphs {
    margin-left: 10px;
    font-size: 16px;
    letter-spacing: 0.12em;
    vertical-align: middle;
    opacity: 0.8;
    transition:
      color 1.2s,
      filter 1.2s,
      opacity 1.2s,
      text-shadow 1.2s;
    /* Dynamic colors set via CSS variables */
    color: var(--glyph-color);
    filter: var(--glyph-filter);
    text-shadow: var(--glyph-text-shadow);
  }

  /* Dynamic Portal Background wrapper */
  .dynamic-portal-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -4;
    opacity: 0.9;
    pointer-events: none;
  }

  /* Dynamic Portal SVG */
  .portal-svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    transition:
      background 1.2s cubic-bezier(0.4, 0, 0.2, 1),
      filter 1.2s ease,
      opacity 1.2s ease;
    filter: brightness(1.3) saturate(1.8);
    opacity: 0.7; /* Control overall visibility */
    /* Dynamic background set via CSS variable */
    background: var(--portal-svg-background);

    /* Optional: Add blend mode for different color mixing */
    /* mix-blend-mode: screen; */

    /* Optional: Add animation */
    /* animation: portalPulse 8s ease-in-out infinite; */
  }

  /* Parallax SVG backgrounds */
  .parallax-svg-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 40vh;
    pointer-events: none;
    opacity: 0.05;
  }

  .parallax-svg-fg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 40vh;
    pointer-events: none;
    opacity: 0.02;
  }

  /* Reality scene section */
  .reality-scene-section {
    position: relative;
    z-index: 1;
  }

  /* Scene bg-reality positioning */
  .bg-reality-position {
    position: absolute;
    z-index: -1;
  }

  /* Scene content wrapper */
  .scene-content-wrapper {
    position: relative;
    z-index: 10;
    pointer-events: auto;
  }

  /* Particles wrapper */
  .particles-wrapper {
    position: relative;
    z-index: -1;
    pointer-events: none;
  }

  /* Title wrapper div */
  .title-wrapper {
    position: relative;
    z-index: 10;
    pointer-events: none;
  }

  /* Quantum title h1 */
  .quantum-title-h1 {
    position: relative;
    z-index: 10;
    pointer-events: auto;
    margin-bottom: -10px;
  }

  /* Title word span */
  .title-word-span {
    position: relative;
    z-index: 10;
  }

  /* Stat value with dynamic colors */
  .stat-value-dynamic {
    transition:
      color 1.2s,
      text-shadow 1.2s;
    /* Dynamic colors set via CSS variables */
    color: var(--stat-color);
    text-shadow: var(--stat-text-shadow);
  }

  /* Button wrapper authenticated */
  .button-wrapper-auth {
    display: flex;
    justify-content: center;
    margin-top: 48px;
    margin-bottom: 24px;
    position: relative;
    z-index: 100;
    pointer-events: auto;
  }

  /* Button wrapper not authenticated */
  .button-wrapper-no-auth {
    display: flex;
    gap: 48px;
    justify-content: center;
    margin-top: 32px;
    position: relative;
    z-index: 100;
    pointer-events: auto;
  }

  /* Inverted N span */
  .inverted-n-span {
    display: inline-block;
    transform: scaleX(-1);
  }

  /* Entanglement scene content */
  .entanglement-scene-content {
    transform: translateY(-50%);
  }

  /* Superposition scene div */
  .superposition-scene-div {
    transform: translateY(-80%);
  }

  /* Holographic parallax effect for ProgressBar floating text */
  .parallax-holo {
    will-change: transform, opacity, filter;
    perspective: 800px;
    transition: none;
    display: inline-block;
    font-size: 2.2em;
    font-family: 'Orbitron', 'JetBrains Mono', monospace;
    font-weight: 900;
    letter-spacing: 0.04em;
    color: #00fff7;
    text-shadow:
      0 0 24px #00fff7cc,
      0 0 60px #00fff744,
      0 0 2px #fff;
    filter: blur(0.5px) brightness(1.1) saturate(1.2);
    opacity: 0.7;
    transform: translateZ(0px) scale(1);
    transition:
      transform 1.2s cubic-bezier(0.4, 0, 0.2, 1),
      opacity 1.2s,
      filter 1.2s;

    &.animate {
      opacity: 0;
      filter: blur(8px) brightness(2.2) saturate(2.5);
      transform: translateZ(180px) scale(2.2) skewY(-6deg) rotateX(18deg);
      pointer-events: none;
    }
  }

  /* Enhanced N3XUS Title with 3D depth */
  .n3xus-title,
  .scramble-title {
    will-change: transform, text-shadow;
    perspective: 1000px;
    transform-style: preserve-3d;
    transition:
      transform 0.1s ease-out,
      text-shadow 0.3s ease;

    &::after {
      content: attr(data-text);
      position: absolute;
      top: 100%;
      left: 0;
      transform: scaleY(-1) rotateX(180deg);
      background: linear-gradient(to bottom, rgba(0, 255, 247, 0.3), transparent);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      opacity: 0.4;
      filter: blur(1px);
      pointer-events: none;
    }
  }

  /* Ensure "Be the defiance" text stays visible */
  .floating-code {
    position: relative !important;
    z-index: 100 !important;
    transform-style: preserve-3d;
    will-change: text-shadow, opacity;

    &.quote-highlight {
      line-height: 2.8;
      margin: 120px 0 32px 0;
      padding: 24px 32px;
      border: none;
      border-radius: 18px;
      font-size: 0.84em;
      font-style: italic;
      font-family: 'Future Z', 'Orbitron', 'JetBrains Mono', monospace;
      font-weight: 800;
      background: linear-gradient(
        135deg,
        #00ffff72,
        #ff00668d,
        #ffff0094,
        #00ff33,
        #cc00ff,
        #ff3300
      );
      background-size: 300% 300%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: #ffffff;
      animation: gradientShift 8s ease-in-out infinite;
      letter-spacing: 0.01em;
      z-index: 100;
      opacity: 1;
      filter: none;
      -webkit-font-smoothing: antialiased;
    }
  }

  /* Seamless scene fade effect */
  .quantum-scene {
    opacity: 1;
    pointer-events: none !important;
    transition: opacity 1.1s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    width: 100vw;
    min-height: 100vh;
    z-index: 1;

    &:not(.active) {
      opacity: 0;
      pointer-events: none !important;
      z-index: 1;
    }

    &.active {
      opacity: 1;
      pointer-events: none !important;
      position: relative;
      z-index: 2;
    }
  }

  /* 3D Parallax Layers */
  .parallax-bg-layer,
  .parallax-fg-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 40vh;
    pointer-events: none;
  }

  .parallax-bg-layer {
    z-index: 1;
  }

  .parallax-fg-layer {
    z-index: 2;
    mix-blend-mode: screen;
    opacity: 0.5;
  }

  .parallax-container {
    position: relative;
    min-height: 100vh;
    perspective: 1500px;
    transform-style: preserve-3d;
    pointer-events: none !important;
    z-index: 1;

    &::before {
      content: '';
      position: fixed;
      top: 30px;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: linear-gradient(
        180deg,
        rgba(0, 0, 0, 0.85) 0%,
        rgba(0, 0, 0, 0.7) 25%,
        rgba(0, 0, 0, 0.6) 35%,
        rgba(0, 0, 0, 0.6) 45%,
        rgba(0, 0, 0, 0.6) 55%,
        rgba(0, 0, 0, 0.5) 65%,
        rgba(0, 0, 0, 0.25) 75%,
        rgba(0, 0, 0, 0.1) 85%,
        rgba(0, 0, 0, 0) 95%
      );
      pointer-events: none !important;
      z-index: 0;
    }
  }

  /* Enhanced Multi-Layer Parallax System */
  .parallax-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none !important;
    will-change: transform, opacity, filter;
    transform-style: preserve-3d;
    z-index: -100;
  }

  .parallax-layer-1 {
    z-index: -150;
  }

  .atmospheric-base {
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden;
  }

  .particle-field {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
  }

  .bg-particle {
    position: absolute;
    width: 2px;
    height: 2px;
    background: #00ffff;
    border-radius: 50%;
    animation: float-particle 20s infinite linear;
    filter: blur(0.5px);
  }

  @keyframes float-particle {
    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
      opacity: 0;
    }
    10%,
    90% {
      opacity: 1;
    }
    50% {
      transform: translateY(-100px) rotate(180deg);
    }
  }

  .parallax-layer-2 {
    z-index: -140;
  }

  .shape-morph-1,
  .shape-morph-2 {
    animation: subtle-morph 15s ease-in-out infinite;
    transform-origin: center;
  }

  .floating-orb-1,
  .floating-orb-2 {
    animation: float-orb 12s ease-in-out infinite;
    transform-origin: center;
  }

  @keyframes subtle-morph {
    0%,
    100% {
      transform: scale(1) rotate(0deg);
    }
    33% {
      transform: scale(1.02) rotate(0.5deg);
    }
    66% {
      transform: scale(0.98) rotate(-0.5deg);
    }
  }

  @keyframes float-orb {
    0%,
    100% {
      transform: translateY(0px) scale(1);
    }
    50% {
      transform: translateY(-20px) scale(1.05);
    }
  }

  .parallax-layer-3 {
    z-index: -130;
  }

  .quantum-grid {
    width: 100%;
    height: 100%;
    position: relative;
    animation: grid-pulse 8s ease-in-out infinite;
  }

  .energy-lines {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
  }

  .energy-line {
    position: absolute;
    width: 100%;
    height: 2px;
    animation: energy-flow 6s linear infinite;
    opacity: 0.4;
  }

  @keyframes grid-pulse {
    0%,
    100% {
      opacity: 0.3;
    }
    50% {
      opacity: 0.6;
    }
  }

  @keyframes energy-flow {
    0% {
      transform: translateX(-100%);
      opacity: 0;
    }
    10%,
    90% {
      opacity: 0.6;
    }
    100% {
      transform: translateX(100%);
      opacity: 0;
    }
  }

  .parallax-layer-4 {
    z-index: -120;
  }

  .fg-shape-1,
  .fg-shape-2 {
    animation: fg-breathe 10s ease-in-out infinite;
  }

  .floating-orb-3,
  .floating-orb-4 {
    animation: orb-glow 8s ease-in-out infinite;
  }

  @keyframes fg-breathe {
    0%,
    100% {
      opacity: 0.8;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.03);
    }
  }

  @keyframes orb-glow {
    0%,
    100% {
      filter: brightness(1) blur(0px);
      transform: scale(1);
    }
    50% {
      filter: brightness(1.3) blur(2px);
      transform: scale(1.1);
    }
  }

  .parallax-layer-5 {
    z-index: -110;
  }

  .detail-elements {
    width: 100%;
    height: 100%;
    position: relative;
  }

  .quantum-sparks {
    position: absolute;
    width: 100%;
    height: 100%;
  }

  .spark {
    position: absolute;
    width: 3px;
    height: 3px;
    animation: spark-twinkle 4s ease-in-out infinite;
    border-radius: 50%;
    filter: blur(0.5px);
  }

  @keyframes spark-twinkle {
    0%,
    100% {
      opacity: 0;
      transform: scale(0.5);
    }
    50% {
      opacity: 1;
      transform: scale(1.5);
    }
  }

  .holographic-frames {
    position: absolute;
    width: 100%;
    height: 100%;
  }

  .holo-frame {
    position: absolute;
    border: 1px solid;
    background: transparent;
    animation: frame-scan 12s linear infinite;
  }

  .frame-1 {
    top: 20%;
    left: 10%;
    width: 200px;
    height: 150px;
    animation-delay: 0s;
  }

  .frame-2 {
    top: 60%;
    right: 15%;
    width: 180px;
    height: 120px;
    animation-delay: 4s;
  }

  .frame-3 {
    bottom: 25%;
    left: 50%;
    width: 160px;
    height: 100px;
    animation-delay: 8s;
  }

  @keyframes frame-scan {
    0%,
    90%,
    100% {
      opacity: 0;
      transform: rotateY(0deg);
    }
    10%,
    80% {
      opacity: 0.6;
      transform: rotateY(5deg);
    }
    50% {
      opacity: 1;
      transform: rotateY(-5deg);
    }
  }

  .scene-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none !important;
    z-index: -1;
    will-change: transform, opacity, filter;
    transition:
      transform 1.2s cubic-bezier(0.4, 0, 0.2, 1),
      opacity 0.9s ease,
      filter 0.9s ease;
    transform-origin: center;
  }

  .scene-background.bg-reality {
    background: linear-gradient(120deg, rgba(10, 15, 26, 0.95) 60%, rgba(26, 42, 58, 0.85) 100%);
    clip-path: polygon(0 0, 100% 0, 100% 80%, 60% 100%, 0 80%);
  }

  .scene-background.bg-probability {
    background: linear-gradient(135deg, rgba(10, 15, 26, 0.92) 60%, rgba(26, 0, 58, 0.88) 100%);
    clip-path: polygon(0 20%, 100% 8%, 100% 90%, 0 100%);
  }

  .scene-background.bg-entanglement {
    background: linear-gradient(110deg, rgba(10, 15, 26, 0.9) 60%, rgba(0, 58, 42, 0.85) 100%);
    clip-path: polygon(0 0, 100% 10%, 100% 100%, 40% 90%, 0 100%);
  }

  .scene-background.bg-superposition {
    background: linear-gradient(160deg, rgba(10, 15, 26, 0.93) 60%, rgba(0, 58, 58, 0.87) 100%);
    clip-path: polygon(0 0, 100% 0, 100% 100%, 20% 90%, 0 100%);
  }

  .cursor,
  .wormhole,
  .gravity-field,
  .dimensional-rift {
    pointer-events: none !important;
    z-index: 99999;
  }

  .nav-links,
  .nav-link,
  .terminal-cursor,
  .scene-content,
  .beam-scan-button,
  button,
  a,
  input,
  .scramble-button {
    position: relative;
    z-index: 100 !important;
    pointer-events: auto !important;
    cursor: pointer !important;
  }

  /* Title should use quantum cursor */
  .quantum-title {
    cursor: none !important;
  }

  .scene-content {
    position: relative;
    z-index: 10 !important;
    padding: 150px 40px 80px;
    text-align: center;
    overflow: visible;
    pointer-events: auto !important;

    /* All interactive children must be clickable */
    button,
    a,
    input,
    [role='button'] {
      pointer-events: auto !important;
      cursor: pointer !important;
      z-index: 100 !important;
    }
  }

  /* Probability section - center content vertically */
  #probability .scene-content {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 80px 40px;
  }

  #probability .scene-title {
    margin-top: 150px;
  }

  #probability .scene-description {
    margin-top: 50px;
    margin-bottom: 100px;
  }

  #probability .code-snippets {
    margin-top: 0;
  }

  .scene-title {
    font-size: 0.8em;
    font-family: 'Orbitron', 'JetBrains Mono', monospace;
    font-weight: 900;
    letter-spacing: 0.15em;
    color: #fbfafe9c;
    margin: 40px 0 20px 0;
  }

  .scene-description {
    font-size: 0.85em;
    font-family: 'Orbitron', 'JetBrains Mono', monospace;
    font-weight: 500;
    letter-spacing: 0.08em;
    color: #00fff7dd;
    text-shadow:
      0 0 8px #00fff744,
      0 0 16px #00fff722;
    margin-bottom: 30px;
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.6;
    transition:
      transform 0.8s cubic-bezier(0.4, 0, 0.2, 1),
      background 0.8s cubic-bezier(0.4, 0, 0.2, 1),
      -webkit-background-clip 0.8s cubic-bezier(0.4, 0, 0.2, 1),
      text-shadow 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    transform-style: preserve-3d;

    &.flipped {
      transform: rotateX(180deg);
      background: linear-gradient(90deg, #ff00ff, #00ff99);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow:
        0 0 12px #ff00ff66,
        0 0 20px #00ff9944;
    }
  }

  .quantum-console {
    margin-top: 120px;
    font-size: 1.02em;
    font-family: 'Orbitron', monospace;
    text-align: center;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
    padding: 20px;
    transform: translateX(0) !important;
    position: relative;
    left: 0;
    right: 0;
  }

  .console-line {
    font-size: 1.105em;
    color: #00ff33a7;
    text-shadow:
      0 0 8px #00eeffa5,
      0 0 16px #00ff3322;
    margin: 12px 0;
    letter-spacing: 0.05em;
    font-family: 'Orbitron', monospace;
  }

  .home-enter-geom-lab-btn {
    font-size: 24px !important;
    padding: 24px 162px !important;
    letter-spacing: 0.05em !important;
  }

  /* Nav bar styles from home.css */
  .quantum-nav {
    width: 100vw;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 10000;
    border-bottom: 2px solid #00ffff44;
    box-shadow: 0 2px 24px #00ffff22;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 40px;
    height: 110px;
    font-family: 'Orbitron', 'JetBrains Mono', monospace;
  }

  .nav-logo {
    display: flex;
    align-items: center;
    position: relative;
  }

  .logo-text {
    position: relative;
    font-family: 'Orbitron', 'JetBrains Mono', monospace;
    font-size: 28px;
    font-weight: 800;
    background: linear-gradient(135deg, #00ffff72, #ff00668d, #ffff0094, #00ff33, #cc00ff, #ff3300);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    color: #ffffff;
    text-shadow: 0 0 20px rgba(45, 86, 86, 0.4);
    animation:
      logoGlitch 6s ease-in-out infinite,
      gradientShift 4s ease-in-out infinite;

    &::before {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 2px;
      color: #ff00ff;
      animation: glitchShift1 3s ease-in-out infinite;
      z-index: -1;
      opacity: 0.7;
    }

    &::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: -2px;
      color: #00ffff;
      animation: glitchShift2 4s ease-in-out infinite;
      z-index: -2;
      opacity: 0.5;
    }
  }

  .nav-links {
    display: flex;
    align-items: center;
    gap: 30px;
  }

  .nav-link {
    color: #00ffff;
    text-decoration: none;
    font-size: 18px;
    font-family: 'Orbitron', 'JetBrains Mono', monospace;
    font-weight: 700;
    letter-spacing: 1px;
    position: relative;
    transition: color 0.2s;

    &:hover {
      color: #ff00cc;
      text-shadow: 0 0 10px #ff00cc;
    }
  }

  .nav-terminal {
    font-size: 14px;
    color: #00ff99;
    margin-left: 20px;
    font-family: 'Orbitron', 'JetBrains Mono', monospace;
  }

  .nav-quantum-field {
    position: absolute;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, #00ffff, #ff00cc, #ffff00, #00ff00, #9900ff);
    opacity: 0.5;
    filter: blur(1px);
  }

  /* Animations from home.css */
  @keyframes logoGlitch {
    0%,
    100% {
      filter: none;
    }
    10% {
      filter: blur(1px) brightness(1.2);
    }
    20% {
      filter: blur(0.5px) brightness(0.8);
    }
    30% {
      filter: blur(2px) brightness(1.4);
    }
    40% {
      filter: blur(0.5px) brightness(1.1);
    }
    50% {
      filter: none;
    }
  }

  @keyframes glitchShift1 {
    0%,
    100% {
      left: 2px;
    }
    50% {
      left: 6px;
    }
  }

  @keyframes glitchShift2 {
    0%,
    100% {
      left: -2px;
    }
    50% {
      left: -6px;
    }
  }

  @keyframes gradientShift {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }
}
